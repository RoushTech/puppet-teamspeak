#!/bin/sh
### BEGIN INIT INFO
# Provides:             teamspeak3
# Required-Start:       $local_fs $network
# Required-Stop:        $local_fs $network
# Default-Start:        2 3 4 5
# Default-Stop:         0 1 6
# Description:          Teamspeak 3 Server
### END INIT INFO
# description: Starts or Stops TeamSpeak 3 Server
#
# works on openSuSE 42 Leap Systems (should also work on openSuse 13.x)
#

USER="<%= @user -%>"
TS3='<%= @home -%>'
STARTSCRIPT="$TS3/ts3server_startscript.sh"

cd $TS3

case "$1" in
        'start')
                su $USER -c "$STARTSCRIPT start"
        ;;
        'stop')
                su $USER -c "$STARTSCRIPT stop"
        ;;
        'restart')
                su $USER -c "$STARTSCRIPT restart"
        ;;
        'status')
                su $USER -c "$STARTSCRIPT status"
        ;;
        *)
        echo "Usage $0 start|stop|restart|status"
esac